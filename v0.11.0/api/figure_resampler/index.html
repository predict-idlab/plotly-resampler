
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Plotly Resampler; a wrapper for plotly Figures to visualize large time-series data.">
      
      
      
        <link rel="canonical" href="https://predict-idlab.github.io/plotly-resampler/v0.11.0/api/figure_resampler/">
      
      
        <link rel="prev" href="../aggregation/plotly_aggregator_parser/">
      
      
        <link rel="next" href="figure_resampler/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>figure_resampler - Plotly Resampler Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#figure_resampler" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Plotly Resampler Documentation" class="md-header__button md-logo" aria-label="Plotly Resampler Documentation" data-md-component="logo">
      
  <img src="../../static/icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Plotly Resampler Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              figure_resampler
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/predict-idlab/plotly-resampler" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    plotly-resampler
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting_started/" class="md-tabs__link">
        
  
  
    
  
  Get started üöÄ

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../dash_app_integration/" class="md-tabs__link">
        
  
  
    
  
  Dash apps ü§ù

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../aggregation/" class="md-tabs__link">
          
  
  
  API üìñ

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../FAQ/" class="md-tabs__link">
        
  
  
    
  
  FAQ ‚ùì

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Plotly Resampler Documentation" class="md-nav__button md-logo" aria-label="Plotly Resampler Documentation" data-md-component="logo">
      
  <img src="../../static/icon.png" alt="logo">

    </a>
    Plotly Resampler Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/predict-idlab/plotly-resampler" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    plotly-resampler
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get started üöÄ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dash_app_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dash apps ü§ù
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API üìñ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API üìñ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    aggregation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            aggregation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aggregation/aggregation_interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    aggregation_interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aggregation/aggregators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    aggregators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aggregation/gap_handler_interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gap_handler_interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aggregation/gap_handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gap_handlers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aggregation/plotly_aggregator_parser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    plotly_aggregator_parser
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    figure_resampler
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            figure_resampler
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="figure_resampler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    figure_resampler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="figure_resampler_interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    figure_resampler_interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="figurewidget_resampler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    figurewidget_resampler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="jupyter_dash_persistent_inline_output/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    jupyter_dash_persistent_inline_output
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../registering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    registering
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../FAQ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ ‚ùì
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#figure_resampler" class="md-nav__link">
    <span class="md-ellipsis">
      figure_resampler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#figure_resampler.FigureResampler" class="md-nav__link">
    <span class="md-ellipsis">
      FigureResampler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FigureResampler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#figure_resampler.FigureResampler.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#figure_resampler.FigureResampler.construct_update_data_patch" class="md-nav__link">
    <span class="md-ellipsis">
      construct_update_data_patch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#figure_resampler.FigureResampler.register_update_graph_callback" class="md-nav__link">
    <span class="md-ellipsis">
      register_update_graph_callback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#figure_resampler.FigureResampler.show_dash" class="md-nav__link">
    <span class="md-ellipsis">
      show_dash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#figure_resampler.FigureResampler.stop_server" class="md-nav__link">
    <span class="md-ellipsis">
      stop_server
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#figure_resampler.FigureWidgetResampler" class="md-nav__link">
    <span class="md-ellipsis">
      FigureWidgetResampler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FigureWidgetResampler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#figure_resampler.FigureWidgetResampler.reload_data" class="md-nav__link">
    <span class="md-ellipsis">
      reload_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#figure_resampler.FigureWidgetResampler.reset_axes" class="md-nav__link">
    <span class="md-ellipsis">
      reset_axes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>figure_resampler</h1>

<div class="doc doc-object doc-module">



<a id="figure_resampler"></a>
    <div class="doc doc-contents first">

      <p>Module withholding wrappers for the plotly <code>go.Figure</code> and <code>go.FigureWidget</code> class 
which allows bookkeeping and back-end based resampling of high-frequency sequential
data.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The term <code>high-frequency</code> actually refers very large amounts of sequential data.</p>
</div>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="figure_resampler.FigureResampler" class="doc doc-heading">
            <code>FigureResampler</code>


<a href="#figure_resampler.FigureResampler" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="figure_resampler.figure_resampler_interface.AbstractFigureAggregator" href="figure_resampler_interface/#figure_resampler.figure_resampler_interface.AbstractFigureAggregator">AbstractFigureAggregator</a></code>, <code><span title="plotly.graph_objects.Figure">Figure</span></code></p>


      <p>Data aggregation functionality for <code>go.Figures</code>.</p>

              <details class="quote">
                <summary>Source code in <code>plotly_resampler/figure_resampler/figure_resampler.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FigureResampler</span><span class="p">(</span><span class="n">AbstractFigureAggregator</span><span class="p">,</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Data aggregation functionality for ``go.Figures``.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">figure</span><span class="p">:</span> <span class="n">BaseFigure</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">convert_existing_traces</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">default_n_shown_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="n">default_downsampler</span><span class="p">:</span> <span class="n">AbstractAggregator</span> <span class="o">=</span> <span class="n">MinMaxLTTB</span><span class="p">(),</span>
        <span class="n">default_gap_handler</span><span class="p">:</span> <span class="n">AbstractGapHandler</span> <span class="o">=</span> <span class="n">MedDiffGapHandler</span><span class="p">(),</span>
        <span class="n">resampled_trace_prefix_suffix</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s1">&#39;&lt;b style=&quot;color:sandybrown&quot;&gt;[R]&lt;/b&gt; &#39;</span><span class="p">,</span>
            <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">show_mean_aggregation_size</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">convert_traces_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">create_overview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">overview_row_idxs</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">overview_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">show_dash_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a dynamic aggregation data mirror using a dash web app.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        figure: BaseFigure</span>
<span class="sd">            The figure that will be decorated. Can be either an empty figure</span>
<span class="sd">            (e.g., ``go.Figure()``, ``make_subplots()``, ``go.FigureWidget``) or an</span>
<span class="sd">            existing figure.</span>
<span class="sd">        convert_existing_traces: bool</span>
<span class="sd">            A bool indicating whether the high-frequency traces of the passed ``figure``</span>
<span class="sd">            should be resampled, by default True. Hence, when set to False, the</span>
<span class="sd">            high-frequency traces of the passed ``figure`` will not be resampled.</span>
<span class="sd">        default_n_shown_samples: int, optional</span>
<span class="sd">            The default number of samples that will be shown for each trace,</span>
<span class="sd">            by default 1000.\n</span>
<span class="sd">            !!! note</span>
<span class="sd">                - This can be overridden within the [`add_trace`][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace] method.</span>
<span class="sd">                - If a trace withholds fewer datapoints than this parameter,</span>
<span class="sd">                  the data will *not* be aggregated.</span>
<span class="sd">        default_downsampler: AbstractAggregator, optional</span>
<span class="sd">            An instance which implements the AbstractAggregator interface and</span>
<span class="sd">            will be used as default downsampler, by default ``MinMaxLTTB`` with</span>
<span class="sd">            ``MinMaxLTTB`` is a heuristic to the LTTB algorithm that uses pre-selection</span>
<span class="sd">            of min-max values (default 4 per bin) to speed up LTTB (as now only 4 values</span>
<span class="sd">            per bin are considered by LTTB). This min-max ratio of 4 can be changed by</span>
<span class="sd">            initializing ``MinMaxLTTB`` with a different value for the ``minmax_ratio``</span>
<span class="sd">            parameter. \n</span>
<span class="sd">            !!! note</span>
<span class="sd">                This can be overridden within the [`add_trace`][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace] method.</span>
<span class="sd">        default_gap_handler: AbstractGapHandler, optional</span>
<span class="sd">            An instance which implements the AbstractGapHandler interface and</span>
<span class="sd">            will be used as default gap handler, by default ``MedDiffGapHandler``.</span>
<span class="sd">            ``MedDiffGapHandler`` will determine gaps by first calculating the median</span>
<span class="sd">            aggregated x difference and then thresholding the aggregated x delta on a</span>
<span class="sd">            multiple of this median difference.  \n</span>
<span class="sd">            !!! note</span>
<span class="sd">                This can be overridden within the [`add_trace`][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace] method.</span>
<span class="sd">        resampled_trace_prefix_suffix: str, optional</span>
<span class="sd">            A tuple which contains the ``prefix`` and ``suffix``, respectively, which</span>
<span class="sd">            will be added to the trace its legend-name when a resampled version of the</span>
<span class="sd">            trace is shown. By default a bold, orange ``[R]`` is shown as prefix</span>
<span class="sd">            (no suffix is shown).</span>
<span class="sd">        show_mean_aggregation_size: bool, optional</span>
<span class="sd">            Whether the mean aggregation bin size will be added as a suffix to the trace</span>
<span class="sd">            its legend-name, by default True.</span>
<span class="sd">        convert_traces_kwargs: dict, optional</span>
<span class="sd">            A dict of kwargs that will be passed to the [`add_trace`][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace] method and</span>
<span class="sd">            will be used to convert the existing traces. \n</span>
<span class="sd">            !!! note</span>
<span class="sd">                This argument is only used when the passed ``figure`` contains data and</span>
<span class="sd">                ``convert_existing_traces`` is set to True.</span>
<span class="sd">        create_overview: bool, optional</span>
<span class="sd">            Whether an overview will be added to the figure (also known as rangeslider),</span>
<span class="sd">            by default False. An overview is a bidirectionally linked figure that is</span>
<span class="sd">            placed below the FigureResampler figure and shows a coarse version on which</span>
<span class="sd">            the current view of the FigureResampler figure is highlighted. The overview</span>
<span class="sd">            can be used to quickly navigate through the data by dragging the selection</span>
<span class="sd">            box.</span>
<span class="sd">            !!! note</span>
<span class="sd">                - In the case of subplots, the overview will be created for each subplot</span>
<span class="sd">                  column. Only a single subplot row can be captured in the overview,</span>
<span class="sd">                  this is by default the first row. If you want to customize this</span>
<span class="sd">                  behavior, you can use the `overview_row_idxs` argument.</span>
<span class="sd">                - This functionality is not yet extensively validated. Please report any</span>
<span class="sd">                  issues you encounter on GitHub.</span>
<span class="sd">        overview_row_idxs: list, optional</span>
<span class="sd">            A list of integers corresponding to the row indices (START AT 0) of the</span>
<span class="sd">            subplots columns that should be linked with the column its corresponding</span>
<span class="sd">            overview. By default None, which will result in the first row being utilized</span>
<span class="sd">            for each column.</span>
<span class="sd">        overview_kwargs: dict, optional</span>
<span class="sd">            A dict of kwargs that will be passed to the `update_layout` method of the</span>
<span class="sd">            overview figure, by default {}, which will result in utilizing the</span>
<span class="sd">            [`default`][_DEFAULT_OVERVIEW_LAYOUT_KWARGS] overview layout kwargs.</span>
<span class="sd">        verbose: bool, optional</span>
<span class="sd">            Whether some verbose messages will be printed or not, by default False.</span>
<span class="sd">        show_dash_kwargs: dict, optional</span>
<span class="sd">            A dict that will be used as default kwargs for the [`show_dash`][figure_resampler.figure_resampler.FigureResampler.show_dash] method.</span>
<span class="sd">            !!! note</span>
<span class="sd">                The passed kwargs to the [`show_dash`][figure_resampler.figure_resampler.FigureResampler.show_dash] method will take precedence over these defaults.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Parse the figure input before calling `super`</span>
        <span class="k">if</span> <span class="n">is_figure</span><span class="p">(</span><span class="n">figure</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_fr</span><span class="p">(</span><span class="n">figure</span><span class="p">):</span>
            <span class="c1"># A go.Figure</span>
            <span class="c1"># =&gt; base case: the figure does not need to be adjusted</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">figure</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Create a new figure object and make sure that the trace uid will not get</span>
            <span class="c1"># adjusted when they are added.</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_figure_class</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">)()</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_data_validator</span><span class="o">.</span><span class="n">set_uid</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">BaseFigure</span><span class="p">):</span>
                <span class="c1"># A base figure object, can be;</span>
                <span class="c1"># - a go.FigureWidget</span>
                <span class="c1"># - a plotly-resampler figure: subclass of AbstractFigureAggregator</span>
                <span class="c1"># =&gt; we first copy the layout, grid_str and grid ref</span>
                <span class="n">f</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">layout</span>
                <span class="n">f</span><span class="o">.</span><span class="n">_grid_str</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">_grid_str</span>
                <span class="n">f</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">_grid_ref</span>
                <span class="n">f</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="s2">&quot;data&quot;</span> <span class="ow">in</span> <span class="n">figure</span> <span class="ow">or</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">in</span> <span class="n">figure</span>  <span class="c1"># or &quot;frames&quot; in figure  # TODO</span>
            <span class="p">):</span>
                <span class="c1"># A figure as a dict, can be;</span>
                <span class="c1"># - a plotly figure as a dict (after calling `fig.to_dict()`)</span>
                <span class="c1"># - a pickled (plotly-resampler) figure (after loading a pickled figure)</span>
                <span class="c1"># =&gt; we first copy the layout, grid_str and grid ref</span>
                <span class="n">f</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="n">_grid_str</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_grid_str&quot;</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_grid_ref&quot;</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">))</span>
                <span class="c1"># `pr_props` is not None when loading a pickled plotly-resampler figure</span>
                <span class="n">f</span><span class="o">.</span><span class="n">_pr_props</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pr_props&quot;</span><span class="p">)</span>
                <span class="c1"># `f._pr_props`` is an attribute to store properties of a</span>
                <span class="c1"># plotly-resampler figure. This attribute is only used to pass</span>
                <span class="c1"># information to the super() constructor. Once the super constructor is</span>
                <span class="c1"># called, the attribute is removed.</span>

                <span class="c1"># f.add_frames(figure.get(&quot;frames&quot;)) TODO</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
                <span class="c1"># A single trace dict or a list of traces</span>
                <span class="n">f</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">figure</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_show_dash_kwargs</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">show_dash_kwargs</span> <span class="k">if</span> <span class="n">show_dash_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{}</span>
        <span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">f</span><span class="p">,</span>
            <span class="n">convert_existing_traces</span><span class="p">,</span>
            <span class="n">default_n_shown_samples</span><span class="p">,</span>
            <span class="n">default_downsampler</span><span class="p">,</span>
            <span class="n">default_gap_handler</span><span class="p">,</span>
            <span class="n">resampled_trace_prefix_suffix</span><span class="p">,</span>
            <span class="n">show_mean_aggregation_size</span><span class="p">,</span>
            <span class="n">convert_traces_kwargs</span><span class="p">,</span>
            <span class="n">verbose</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">AbstractFigureAggregator</span><span class="p">):</span>
            <span class="c1"># Copy the `_hf_data` if the previous figure was an AbstractFigureAggregator</span>
            <span class="c1"># and adjust the default `max_n_samples` and `downsampler`</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hf_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_copy_hf_data</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">_hf_data</span><span class="p">,</span> <span class="n">adjust_default_values</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Note: This hack ensures that the this figure object initially uses</span>
            <span class="c1"># data of the whole view. More concretely; we create a dict</span>
            <span class="c1"># serialization figure and adjust the hf-traces to the whole view</span>
            <span class="c1"># with the check-update method (by passing no range / filter args)</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_update</span><span class="p">():</span>
                <span class="n">graph_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_current_graph</span><span class="p">()</span>
                <span class="n">update_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_update_figure_dict</span><span class="p">(</span><span class="n">graph_dict</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">update_indices</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">graph_dict</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="n">idx</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_create_overview</span> <span class="o">=</span> <span class="n">create_overview</span>
        <span class="c1"># update the overview layout</span>
        <span class="n">overview_layout_kwargs</span> <span class="o">=</span> <span class="n">_DEFAULT_OVERVIEW_LAYOUT_KWARGS</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">overview_layout_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">overview_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_overview_layout_kwargs</span> <span class="o">=</span> <span class="n">overview_layout_kwargs</span>

        <span class="c1"># array representing the row indices per column (START AT 0) of the subplot</span>
        <span class="c1"># that should be linked with the columns corresponding overview.</span>
        <span class="c1"># By default, the first row (i.e. index 0) will be utilized for each column</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_overview_row_idxs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_subplot_row_indices</span><span class="p">(</span><span class="n">overview_row_idxs</span><span class="p">)</span>

        <span class="c1"># The FigureResampler needs a dash app</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="p">:</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Certain functions will be different when using persistent inline</span>
        <span class="c1"># (namely `show_dash` and `stop_callback`)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_subplot_rows_and_cols_from_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the number of rows and columns of the figure&#39;s grid.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[int, int]</span>
<span class="sd">            The number of rows and columns of the figure&#39;s grid, respectively.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># case: go.Figure (no subplots)</span>
            <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c1"># TODO: not 100% sure whether this is correct</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_grid_ref</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_grid_ref</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_subplot_row_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_indices</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify whether the passed row indices are valid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        row_indices: list, optional</span>
<span class="sd">            A list of integers representing the row indices for which the overview</span>
<span class="sd">            should be created. The length of the list should be equal to the number of</span>
<span class="sd">            columns of the figure. Each element of the list should be smaller than the</span>
<span class="sd">            number of rows of the figure (thus note that the row indices start at 0). By</span>
<span class="sd">            default None, which will result in the first row being utilized for each</span>
<span class="sd">            column.</span>
<span class="sd">            !!! note</span>
<span class="sd">                When you do not want to use an overview of a certain column (because</span>
<span class="sd">                a certain subplot spans more than 1 column), you can specify this by</span>
<span class="sd">                setting that respecive row_index value to `None`.</span>

<span class="sd">                For instance, the sbuplot on row 2, col 1 spans two coloms. So when you</span>
<span class="sd">                intend to utilize that subplot within the overview, you want to specify</span>
<span class="sd">                the row_indices as: `[1, None, ...]`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[int]</span>
<span class="sd">            A list of integers representing the row indices per subplot column.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_rows</span><span class="p">,</span> <span class="n">n_cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_subplot_rows_and_cols_from_grid</span><span class="p">()</span>

        <span class="c1"># By default, the first row is utilized to set the row indices</span>
        <span class="k">if</span> <span class="n">row_indices</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n_cols</span>

        <span class="c1"># perform some checks on the row indices</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row_indices</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span> <span class="s2">&quot;row indices must be a list&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">row_indices</span><span class="p">)</span> <span class="o">==</span> <span class="n">n_cols</span>
        <span class="p">),</span> <span class="s2">&quot;the number of row indices must be equal to the number of columns&quot;</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span>
            <span class="p">[(</span><span class="n">li</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">li</span> <span class="o">&lt;</span> <span class="n">n_rows</span><span class="p">)</span> <span class="k">for</span> <span class="n">li</span> <span class="ow">in</span> <span class="n">row_indices</span><span class="p">]</span>
        <span class="p">),</span> <span class="s2">&quot;row indices must be smaller than the number of rows&quot;</span>

        <span class="k">return</span> <span class="n">row_indices</span>

    <span class="c1"># determines which subplot data to take from main and put into coarse</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_remove_other_axes_for_coarse</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
        <span class="c1"># base case: no rows and cols to filter</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># case: go.Figure (no subplots)</span>
            <span class="k">return</span> <span class="bp">self</span>

        <span class="c1"># Create the grid specification for the overview figure (in `reduced_grid_ref`)</span>
        <span class="c1"># The trace_list and the 2 axis lists are 1D arrays holding track of the traces</span>
        <span class="c1"># and axes to track.</span>
        <span class="n">reduced_grid_ref</span> <span class="o">=</span> <span class="p">[[]]</span>

        <span class="c1"># Store the xaxis keys (e.g., x2) of the traces to keep</span>
        <span class="n">trace_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Store the xaxis and yaxis layout keys of the traces to keep (e.g., xaxis2)</span>
        <span class="n">layout_xaxis_list</span><span class="p">,</span> <span class="n">layout_yaxis_list</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">col_idx</span><span class="p">,</span> <span class="n">row_idx</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_overview_row_idxs</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">row_idx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip None value</span>
                <span class="k">continue</span>

            <span class="n">overview_grid_ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grid_ref</span><span class="p">[</span><span class="n">row_idx</span><span class="p">][</span><span class="n">col_idx</span><span class="p">]</span>
            <span class="n">reduced_grid_ref</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">overview_grid_ref</span><span class="p">)</span>  <span class="c1"># [0] bc 1 row in overview</span>
            <span class="k">for</span> <span class="n">subplot</span> <span class="ow">in</span> <span class="n">overview_grid_ref</span><span class="p">:</span>
                <span class="n">trace_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subplot</span><span class="o">.</span><span class="n">trace_kwargs</span><span class="p">[</span><span class="s2">&quot;xaxis&quot;</span><span class="p">])</span>

                <span class="c1"># store the layout keys so that we can retain the exact layout</span>
                <span class="n">xaxis_key</span><span class="p">,</span> <span class="n">yaxis_key</span> <span class="o">=</span> <span class="n">subplot</span><span class="o">.</span><span class="n">layout_keys</span>
                <span class="n">layout_yaxis_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yaxis_key</span><span class="p">)</span>
                <span class="n">layout_xaxis_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xaxis_key</span><span class="p">)</span>
        <span class="c1"># print(&quot;layout_list&quot;, l_xaxis_list, l_yaxis_list)</span>
        <span class="c1"># print(&quot;trace_list&quot;, trace_list)</span>

        <span class="n">fig_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_current_graph</span><span class="p">()</span>  <span class="c1"># a copy of the current graph</span>

        <span class="c1"># copy the data from the relevant overview subplots</span>
        <span class="n">reduced_fig_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="n">fig_dict</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;template&quot;</span><span class="p">]},</span>
        <span class="p">}</span>
        <span class="c1"># NOTE: we enumerate over the data of the full figure so that we can utilize the</span>
        <span class="c1"># trace index to mimic the colorway.</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">trace</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fig_dict</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]):</span>
            <span class="c1"># NOTE: the interplay between line_color and marker_color seems to work in</span>
            <span class="c1"># this implementation - a more thorough investigation might be needed</span>
            <span class="k">if</span> <span class="n">trace</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">trace_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;line&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">trace</span><span class="p">:</span>
                    <span class="n">trace</span><span class="p">[</span><span class="s2">&quot;line&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="c1"># Ensure that the same color is utilized</span>
                <span class="n">trace</span><span class="p">[</span><span class="s2">&quot;line&quot;</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_layout_obj</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">colorway</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">color</span> <span class="ow">is</span> <span class="kc">None</span>
                    <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">color</span>
                <span class="p">)</span>
                <span class="c1"># add the trace to the reduced figure</span>
                <span class="n">reduced_fig_dict</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>

        <span class="c1"># Add the relevant layout keys to the reduced figure</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">fig_dict</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">layout_xaxis_list</span><span class="p">:</span>
                <span class="n">reduced_fig_dict</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">layout_yaxis_list</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="c1"># set the domain to [0, 1] to ensure that the overview figure has the</span>
                <span class="c1"># global y-axis range</span>
                <span class="n">v</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;domain&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
                <span class="n">reduced_fig_dict</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="c1"># Create a figure object using the reduced figure dict</span>
        <span class="n">reduced_fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">reduced_fig_dict</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">])</span>
        <span class="n">reduced_fig</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="o">=</span> <span class="n">reduced_grid_ref</span>
        <span class="c1"># Ensure that the trace uid is not adjusted, this must be set prior to adding</span>
        <span class="c1"># the trace data. Otherwise, data aggregation will not work.</span>
        <span class="n">reduced_fig</span><span class="o">.</span><span class="n">_data_validator</span><span class="o">.</span><span class="n">set_uid</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">reduced_fig</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">reduced_fig_dict</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">reduced_fig</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_overview_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
        <span class="c1"># create a new coarse fig</span>
        <span class="n">reduced_fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_other_axes_for_coarse</span><span class="p">()</span>

        <span class="c1"># Resample the coarse figure using 3x the default aggregation size to ensure</span>
        <span class="c1"># that it contains sufficient details</span>
        <span class="n">coarse_fig_hf</span> <span class="o">=</span> <span class="n">FigureResampler</span><span class="p">(</span>
            <span class="n">reduced_fig</span><span class="p">,</span>
            <span class="n">default_n_shown_samples</span><span class="o">=</span><span class="mi">3</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_global_n_shown_samples</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># NOTE: this way we can alter props without altering the original hf data</span>
        <span class="c1"># NOTE: this also copies the default aggregation functionality to the coarse figure</span>
        <span class="n">coarse_fig_hf</span><span class="o">.</span><span class="n">_hf_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">uid</span><span class="p">:</span> <span class="n">trc</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">for</span> <span class="n">uid</span><span class="p">,</span> <span class="n">trc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hf_data</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">coarse_fig_hf</span><span class="o">.</span><span class="n">hf_data</span><span class="p">:</span>
            <span class="n">trace</span><span class="p">[</span><span class="s2">&quot;max_n_samples&quot;</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">3</span>

        <span class="n">coarse_fig_dict</span> <span class="o">=</span> <span class="n">coarse_fig_hf</span><span class="o">.</span><span class="n">_get_current_graph</span><span class="p">()</span>
        <span class="c1"># add the 3x max_n_samples coarse figure data to the coarse_fig_dict</span>
        <span class="n">coarse_fig_hf</span><span class="o">.</span><span class="n">_check_update_figure_dict</span><span class="p">(</span><span class="n">coarse_fig_dict</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">coarse_fig_hf</span>

        <span class="n">coarse_fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">coarse_fig_dict</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">])</span>
        <span class="n">coarse_fig</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="o">=</span> <span class="n">reduced_fig</span><span class="o">.</span><span class="n">_grid_ref</span>
        <span class="n">coarse_fig</span><span class="o">.</span><span class="n">_data_validator</span><span class="o">.</span><span class="n">set_uid</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">coarse_fig</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">coarse_fig_dict</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
        <span class="c1"># remove any update menus for the coarse figure</span>
        <span class="n">coarse_fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;updatemenus&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="c1"># remove the `rangeselector` options for all &#39;axis&#39; keys in the layout of the</span>
        <span class="c1"># coarse figure</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">coarse_fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">_props</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s2">&quot;axis&quot;</span> <span class="ow">in</span> <span class="n">k</span><span class="p">:</span>
                <span class="n">v</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;rangeselector&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># height of the overview scales with the height of the dynamic view</span>
        <span class="n">coarse_fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_overview_layout_kwargs</span><span class="p">,</span>
            <span class="n">hovermode</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">clickmode</span><span class="o">=</span><span class="s2">&quot;event+select&quot;</span><span class="p">,</span>
            <span class="n">dragmode</span><span class="o">=</span><span class="s2">&quot;select&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Hide the grid</span>
        <span class="n">hide_kwrgs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">showgrid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">showticklabels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">zeroline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">title_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">ticks</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">showline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">linecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">coarse_fig</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="o">**</span><span class="n">hide_kwrgs</span><span class="p">)</span>
        <span class="n">coarse_fig</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="o">**</span><span class="n">hide_kwrgs</span><span class="p">)</span>

        <span class="n">vrect_props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">line_width</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x1</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
            <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">fillcolor</span><span class="o">=</span><span class="s2">&quot;lightblue&quot;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="s2">&quot;above&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># case: go.Figure (no subplots)</span>
            <span class="c1"># set the fixed range to True</span>
            <span class="n">coarse_fig</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;xaxis&quot;</span><span class="p">][</span><span class="s2">&quot;fixedrange&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">coarse_fig</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;yaxis&quot;</span><span class="p">][</span><span class="s2">&quot;fixedrange&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="c1"># add a shading to the overview</span>
            <span class="n">coarse_fig</span><span class="o">.</span><span class="n">add_vrect</span><span class="p">(</span><span class="n">xref</span><span class="o">=</span><span class="s2">&quot;x domain&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">vrect_props</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">coarse_fig</span>

        <span class="n">col_idx_overview</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">col_idx</span><span class="p">,</span> <span class="n">row_idx</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_overview_row_idxs</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">row_idx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip the None value</span>
                <span class="k">continue</span>

            <span class="c1"># we will only use the first grid-ref (as we will otherwise have multiple</span>
            <span class="c1"># overlapping selection boxes)</span>
            <span class="k">for</span> <span class="n">subplot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grid_ref</span><span class="p">[</span><span class="n">row_idx</span><span class="p">][</span><span class="n">col_idx</span><span class="p">][:</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">xaxis_key</span><span class="p">,</span> <span class="n">yaxis_key</span> <span class="o">=</span> <span class="n">subplot</span><span class="o">.</span><span class="n">layout_keys</span>

                <span class="c1"># set the fixed range to True</span>
                <span class="n">coarse_fig</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="n">xaxis_key</span><span class="p">][</span><span class="s2">&quot;fixedrange&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">coarse_fig</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="n">yaxis_key</span><span class="p">][</span><span class="s2">&quot;fixedrange&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="c1"># add a shading to the overview</span>
                <span class="n">coarse_fig</span><span class="o">.</span><span class="n">add_vrect</span><span class="p">(</span>
                    <span class="n">col</span><span class="o">=</span><span class="n">col_idx_overview</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">xref</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">subplot</span><span class="o">.</span><span class="n">trace_kwargs</span><span class="p">[</span><span class="s1">&#39;xaxis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> domain&quot;</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">vrect_props</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="n">col_idx_overview</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># only increase the index when not None</span>

        <span class="k">return</span> <span class="n">coarse_fig</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">show_dash</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">init_dash_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">graph_properties</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Registers the `update_graph` callback &amp; show the figure in a dash app.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mode: str, optional</span>
<span class="sd">            Display mode. One of:\n</span>
<span class="sd">              * ``&quot;external&quot;``: The URL of the app will be displayed in the notebook</span>
<span class="sd">                output cell. Clicking this URL will open the app in the default</span>
<span class="sd">                web browser.</span>
<span class="sd">              * ``&quot;inline&quot;``: The app will be displayed inline in the notebook output</span>
<span class="sd">                cell in an iframe.</span>
<span class="sd">              * ``&quot;inline_persistent&quot;``: The app will be displayed inline in the</span>
<span class="sd">                notebook output cell in an iframe, if the app is not reachable a static</span>
<span class="sd">                image of the figure is shown. Hence this is a persistent version of the</span>
<span class="sd">                ``&quot;inline&quot;`` mode, allowing users to see a static figure in other</span>
<span class="sd">                environments, browsers, etc.</span>

<span class="sd">                !!! note</span>

<span class="sd">                    This mode requires the ``kaleido`` and ``flask_cors`` package.</span>
<span class="sd">                    Install them : ``pip install plotly_resampler[inline_persistent]``</span>
<span class="sd">                    or ``pip install kaleido flask_cors``.</span>

<span class="sd">              * ``&quot;jupyterlab&quot;``: The app will be displayed in a dedicated tab in the</span>
<span class="sd">                JupyterLab interface. Requires JupyterLab and the ``jupyterlab-dash``</span>
<span class="sd">                extension.</span>
<span class="sd">            By default None, which will result in the same behavior as ``&quot;external&quot;``.</span>
<span class="sd">        config: dict, optional</span>
<span class="sd">            The configuration options for displaying this figure, by default None.</span>
<span class="sd">            This ``config`` parameter is the same as the dict that you would pass as</span>
<span class="sd">            ``config`` argument to the `show` method.</span>
<span class="sd">            See more [https://plotly.com/python/configuration-options/](https://plotly.com/python/configuration-options/)</span>
<span class="sd">        init_dash_kwargs: dict, optional</span>
<span class="sd">            Keyword arguments for the Dash app constructor.</span>
<span class="sd">            !!! note</span>
<span class="sd">                This variable is of special interest when working in a jupyterhub +</span>
<span class="sd">                kubernetes environment. In this case, user notebook servers are spawned</span>
<span class="sd">                as separate pods and user access to those servers are proxied via</span>
<span class="sd">                jupyterhub. Dash requires the `requests_pathname_prefix` to be set on</span>
<span class="sd">                __init__ - which can be done via this `init_dash_kwargs` argument.</span>
<span class="sd">                Note that you should also pass the `jupyter_server_url` to the</span>
<span class="sd">                `show_dash` method.</span>
<span class="sd">                More details: https://github.com/predict-idlab/plotly-resampler/issues/265</span>
<span class="sd">        graph_properties: dict, optional</span>
<span class="sd">            Dictionary of (keyword, value) for the properties that should be passed to</span>
<span class="sd">            the dcc.Graph, by default None.</span>
<span class="sd">            e.g.: `{&quot;style&quot;: {&quot;width&quot;: &quot;50%&quot;}}`</span>
<span class="sd">            Note: &quot;config&quot; is not allowed as key in this dict, as there is a distinct</span>
<span class="sd">            ``config`` parameter for this property in this method.</span>
<span class="sd">            See more [https://dash.plotly.com/dash-core-components/graph](https://dash.plotly.com/dash-core-components/graph)</span>
<span class="sd">        **kwargs: dict</span>
<span class="sd">            kwargs for the ``app.run_server()`` method, e.g., port=8037.</span>
<span class="sd">            !!! note</span>
<span class="sd">                These kwargs take precedence over the ones that are passed to the</span>
<span class="sd">                constructor via the ``show_dash_kwargs`` argument.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">available_modes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dash</span><span class="o">.</span><span class="n">_jupyter</span><span class="o">.</span><span class="n">JupyterDisplayMode</span><span class="o">.</span><span class="n">__args__</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span>
            <span class="s2">&quot;inline_persistent&quot;</span>
        <span class="p">]</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">mode</span> <span class="ow">in</span> <span class="n">available_modes</span>
        <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;mode must be one of </span><span class="si">{</span><span class="n">available_modes</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">graph_properties</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">graph_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">graph_properties</span>
        <span class="k">assert</span> <span class="s2">&quot;config&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">graph_properties</span>  <span class="c1"># There is a param for config</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;autosize&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;height&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">graph_properties</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;style&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="s2">&quot;100%&quot;</span><span class="p">})</span>

        <span class="c1"># 0. Check if the traces need to be updated when there is a xrange set</span>
        <span class="c1"># This will be the case when the users has set a xrange (via the `update_layout`</span>
        <span class="c1"># or `update_xaxes` methods`)</span>
        <span class="n">relayout_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">xaxis_str</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">:</span>
            <span class="n">x_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]</span><span class="o">.</span><span class="n">range</span>
            <span class="k">if</span> <span class="n">x_range</span><span class="p">:</span>  <span class="c1"># when not None</span>
                <span class="n">relayout_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xaxis_str</span><span class="si">}</span><span class="s2">.range[0]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">relayout_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xaxis_str</span><span class="si">}</span><span class="s2">.range[1]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">relayout_dict</span><span class="p">:</span>  <span class="c1"># when not empty</span>
            <span class="n">update_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_update_data</span><span class="p">(</span><span class="n">relayout_dict</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_no_update</span><span class="p">(</span><span class="n">update_data</span><span class="p">):</span>  <span class="c1"># when there is an update</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_update</span><span class="p">():</span>
                    <span class="c1"># First update the layout (first item of update_data)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_relayout</span><span class="p">(</span><span class="n">update_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

                    <span class="c1"># Then update the data</span>
                    <span class="k">for</span> <span class="n">updated_trace</span> <span class="ow">in</span> <span class="n">update_data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                        <span class="n">trace_idx</span> <span class="o">=</span> <span class="n">updated_trace</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">trace_idx</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">updated_trace</span><span class="p">)</span>

        <span class="c1"># 1. Construct the Dash app layout</span>
        <span class="n">init_dash_kwargs</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">init_dash_kwargs</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">init_dash_kwargs</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_overview</span><span class="p">:</span>
            <span class="c1"># fmt: off</span>
            <span class="c1"># Add the assets folder to the init_dash_kwargs</span>
            <span class="n">init_dash_kwargs</span><span class="p">[</span><span class="s2">&quot;assets_folder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">ASSETS_FOLDER</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
            <span class="c1"># Also include the lodash script, as the client-side callbacks uses this</span>
            <span class="n">init_dash_kwargs</span><span class="p">[</span><span class="s2">&quot;external_scripts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;https://cdn.jsdelivr.net/npm/lodash/lodash.min.js&quot;</span> <span class="p">]</span>
            <span class="c1"># fmt: on</span>

        <span class="c1"># fmt: off</span>
        <span class="n">div</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;resample-figure&quot;</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">graph_properties</span>
                <span class="p">)</span>
            <span class="p">],</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;flex&quot;</span><span class="p">,</span> <span class="s2">&quot;flex-flow&quot;</span><span class="p">:</span> <span class="s2">&quot;column&quot;</span><span class="p">,</span>
                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="s2">&quot;95vh&quot;</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="s2">&quot;100%&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>
        <span class="c1"># fmt: on</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_overview</span><span class="p">:</span>
            <span class="n">overview_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{}</span>
            <span class="n">overview_config</span><span class="p">[</span><span class="s2">&quot;displayModeBar&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">coarse_fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_overview_figure</span><span class="p">()</span>
            <span class="n">div</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;overview-figure&quot;</span><span class="p">,</span>
                    <span class="n">figure</span><span class="o">=</span><span class="n">coarse_fig</span><span class="p">,</span>
                    <span class="n">config</span><span class="o">=</span><span class="n">overview_config</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">graph_properties</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">]</span>

        <span class="c1"># Create the app, populate the layout and register the resample callback</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="s2">&quot;local_app&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">init_dash_kwargs</span><span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">div</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_update_graph_callback</span><span class="p">(</span>
            <span class="n">app</span><span class="p">,</span>
            <span class="s2">&quot;resample-figure&quot;</span><span class="p">,</span>
            <span class="s2">&quot;overview-figure&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_overview</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># 2. Run the app</span>
        <span class="n">height_param</span> <span class="o">=</span> <span class="s2">&quot;height&quot;</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;inline_persistent&quot;</span> <span class="k">else</span> <span class="s2">&quot;jupyter_height&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;inline&quot;</span> <span class="ow">in</span> <span class="n">mode</span> <span class="ow">and</span> <span class="n">height_param</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="c1"># If app height is not specified -&gt; re-use figure height for inline dash app</span>
            <span class="c1">#  Note: default layout height is 450 (whereas default app height is 650)</span>
            <span class="c1">#  See: https://plotly.com/python/reference/layout/#layout-height</span>
            <span class="n">fig_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">450</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="n">height_param</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig_height</span> <span class="o">+</span> <span class="mi">18</span>

        <span class="c1"># kwargs take precedence over the show_dash_kwargs</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_show_dash_kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">}</span>

        <span class="c1"># Store the app information, so it can be killed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app</span> <span class="o">=</span> <span class="n">app</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_host</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;host&quot;</span><span class="p">,</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;port&quot;</span><span class="p">,</span> <span class="s2">&quot;8050&quot;</span><span class="p">)</span>

        <span class="c1"># function signatures are slightly different for the (Jupyter)Dash and the</span>
        <span class="c1"># JupyterDashInlinePersistent implementations</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;inline_persistent&quot;</span><span class="p">:</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">.jupyter_dash_persistent_inline_output</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
                <span class="n">JupyterDashPersistentInlineOutput</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">jpi</span> <span class="o">=</span> <span class="n">JupyterDashPersistentInlineOutput</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">jpi</span><span class="o">.</span><span class="n">run_app</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="n">app</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">jupyter_mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">stop_server</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">warn</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the running dash-app.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        warn: bool</span>
<span class="sd">            Whether a warning message will be shown or  not, by default True.</span>

<span class="sd">        !!! warning</span>

<span class="sd">            This only works if the dash-app was started with [`show_dash`][figure_resampler.figure_resampler.FigureResampler.show_dash].</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">servers_dict</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">jupyter_dash</span><span class="o">.</span><span class="n">_servers</span>
            <span class="n">old_server</span> <span class="o">=</span> <span class="n">servers_dict</span><span class="o">.</span><span class="n">get</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">old_server</span><span class="p">:</span>
                <span class="n">old_server</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
            <span class="k">del</span> <span class="n">servers_dict</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">_host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="n">warn</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;Could not stop the server, either the </span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">- &#39;show-dash&#39; method was not called, or </span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">- the dash-server wasn&#39;t started with &#39;show_dash&#39;&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">construct_update_data_patch</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">relayout_data</span><span class="p">:</span> <span class="nb">dict</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">dash</span><span class="o">.</span><span class="n">Patch</span><span class="p">,</span> <span class="n">dash</span><span class="o">.</span><span class="n">no_update</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Construct the Patch of the to-be-updated front-end data, based on the layout</span>
<span class="sd">        change.</span>

<span class="sd">        Attention</span>
<span class="sd">        ---------</span>
<span class="sd">        This method is tightly coupled with Dash app callbacks. It takes the front-end</span>
<span class="sd">        figure its ``relayoutData`` as input and returns the ``dash.Patch`` which needs</span>
<span class="sd">        to be sent to the ``figure`` property for the corresponding ``dcc.Graph``.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        relayout_data: dict</span>
<span class="sd">            A dict containing the ``relayoutData`` (i.e., the changed layout data) of</span>
<span class="sd">            the corresponding front-end graph.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dash.Patch:</span>
<span class="sd">            The Patch object containing the figure updates which needs to be sent to</span>
<span class="sd">            the front-end.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">update_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_update_data</span><span class="p">(</span><span class="n">relayout_data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update_data</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_data</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">dash</span><span class="o">.</span><span class="n">no_update</span>

        <span class="n">patched_figure</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Patch</span><span class="p">()</span>  <span class="c1"># create patch</span>
        <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">update_data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>  <span class="c1"># skip first item as it contains the relayout</span>
            <span class="n">trace_index</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>  <span class="c1"># the index of the corresponding trace</span>
            <span class="c1"># All the other items are the trace properties which needs to be updated</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">trace</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># NOTE: we need to use the `patched_figure` as a dict, and not</span>
                <span class="c1"># `patched_figure.data` as the latter will replace **all** the</span>
                <span class="c1"># data for the corresponding trace, and we just want to update the</span>
                <span class="c1"># specific trace its properties.</span>
                <span class="n">patched_figure</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="n">trace_index</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">patched_figure</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register_update_graph_callback</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">app</span><span class="p">:</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">,</span>
        <span class="n">graph_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">coarse_graph_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register the [`construct_update_data_patch`][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.construct_update_data_patch]</span>
<span class="sd">        method as callback function to the passed dash-app.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        app: Union[dash.Dash, JupyterDash]</span>
<span class="sd">            The app in which the callback will be registered.</span>
<span class="sd">        graph_id:</span>
<span class="sd">            The id of the ``dcc.Graph``-component which withholds the to-be resampled</span>
<span class="sd">            Figure.</span>
<span class="sd">        coarse_graph_id: str, optional</span>
<span class="sd">            The id of the ``dcc.Graph``-component which withholds the coarse overview</span>
<span class="sd">            Figure, by default None.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># As we use the figure again as output, we need to set: allow_duplicate=True</span>

        <span class="k">if</span> <span class="n">coarse_graph_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># update pr graph range with overview selection</span>
            <span class="n">app</span><span class="o">.</span><span class="n">clientside_callback</span><span class="p">(</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">ClientsideFunction</span><span class="p">(</span>
                    <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;clientside&quot;</span><span class="p">,</span> <span class="n">function_name</span><span class="o">=</span><span class="s2">&quot;coarse_to_main&quot;</span>
                <span class="p">),</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">allow_duplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="n">coarse_graph_id</span><span class="p">,</span> <span class="s2">&quot;selectedData&quot;</span><span class="p">),</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">State</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">),</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">State</span><span class="p">(</span><span class="n">coarse_graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">),</span>
                <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># update selectbox with clientside callback</span>
            <span class="n">app</span><span class="o">.</span><span class="n">clientside_callback</span><span class="p">(</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">ClientsideFunction</span><span class="p">(</span>
                    <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;clientside&quot;</span><span class="p">,</span> <span class="n">function_name</span><span class="o">=</span><span class="s2">&quot;main_to_coarse&quot;</span>
                <span class="p">),</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">coarse_graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">allow_duplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;relayoutData&quot;</span><span class="p">),</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">State</span><span class="p">(</span><span class="n">coarse_graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">),</span>
                <span class="n">dash</span><span class="o">.</span><span class="n">State</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">),</span>
                <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;figure&quot;</span><span class="p">,</span> <span class="n">allow_duplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;relayoutData&quot;</span><span class="p">),</span>
            <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">construct_update_data_patch</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_pr_props_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="c1"># Add the additional plotly-resampler properties of this class</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_get_pr_props_keys</span><span class="p">()</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;_show_dash_kwargs&quot;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ipython_display_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># To display the figure inline as a dash app</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_dash</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;inline&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="figure_resampler.FigureResampler.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">figure</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">convert_existing_traces</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default_n_shown_samples</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">default_downsampler</span><span class="o">=</span><span class="n">MinMaxLTTB</span><span class="p">(),</span> <span class="n">default_gap_handler</span><span class="o">=</span><span class="n">MedDiffGapHandler</span><span class="p">(),</span> <span class="n">resampled_trace_prefix_suffix</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;&lt;b style=&quot;color:sandybrown&quot;&gt;[R]&lt;/b&gt; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="n">show_mean_aggregation_size</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">convert_traces_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">create_overview</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">overview_row_idxs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overview_kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show_dash_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#figure_resampler.FigureResampler.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Initialize a dynamic aggregation data mirror using a dash web app.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>figure</code></td>
            <td>
                  <code><span title="plotly.basedatatypes.BaseFigure">BaseFigure</span> | dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The figure that will be decorated. Can be either an empty figure
(e.g., <code>go.Figure()</code>, <code>make_subplots()</code>, <code>go.FigureWidget</code>) or an
existing figure.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>convert_existing_traces</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A bool indicating whether the high-frequency traces of the passed <code>figure</code>
should be resampled, by default True. Hence, when set to False, the
high-frequency traces of the passed <code>figure</code> will not be resampled.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>default_n_shown_samples</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default number of samples that will be shown for each trace,
by default 1000.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>This can be overridden within the <a class="autorefs autorefs-internal" href="figure_resampler_interface/#figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace"><code>add_trace</code></a> method.</li>
<li>If a trace withholds fewer datapoints than this parameter,
  the data will <em>not</em> be aggregated.</li>
</ul>
</div>
              </div>
            </td>
            <td>
                  <code>1000</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>default_downsampler</code></td>
            <td>
                  <code><span title="figure_resampler.aggregation.AbstractAggregator">AbstractAggregator</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance which implements the AbstractAggregator interface and
will be used as default downsampler, by default <code>MinMaxLTTB</code> with
<code>MinMaxLTTB</code> is a heuristic to the LTTB algorithm that uses pre-selection
of min-max values (default 4 per bin) to speed up LTTB (as now only 4 values
per bin are considered by LTTB). This min-max ratio of 4 can be changed by
initializing <code>MinMaxLTTB</code> with a different value for the <code>minmax_ratio</code>
parameter. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This can be overridden within the <a class="autorefs autorefs-internal" href="figure_resampler_interface/#figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace"><code>add_trace</code></a> method.</p>
</div>
              </div>
            </td>
            <td>
                  <code><span title="figure_resampler.aggregation.MinMaxLTTB">MinMaxLTTB</span>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>default_gap_handler</code></td>
            <td>
                  <code><span title="figure_resampler.aggregation.AbstractGapHandler">AbstractGapHandler</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance which implements the AbstractGapHandler interface and
will be used as default gap handler, by default <code>MedDiffGapHandler</code>.
<code>MedDiffGapHandler</code> will determine gaps by first calculating the median
aggregated x difference and then thresholding the aggregated x delta on a
multiple of this median difference.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This can be overridden within the <a class="autorefs autorefs-internal" href="figure_resampler_interface/#figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace"><code>add_trace</code></a> method.</p>
</div>
              </div>
            </td>
            <td>
                  <code><span title="figure_resampler.aggregation.MedDiffGapHandler">MedDiffGapHandler</span>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>resampled_trace_prefix_suffix</code></td>
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[str, str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple which contains the <code>prefix</code> and <code>suffix</code>, respectively, which
will be added to the trace its legend-name when a resampled version of the
trace is shown. By default a bold, orange <code>[R]</code> is shown as prefix
(no suffix is shown).</p>
              </div>
            </td>
            <td>
                  <code>(&#39;&lt;b style=&#34;color:sandybrown&#34;&gt;[R]&lt;/b&gt; &#39;, &#39;&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>show_mean_aggregation_size</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the mean aggregation bin size will be added as a suffix to the trace
its legend-name, by default True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>convert_traces_kwargs</code></td>
            <td>
                  <code>dict | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dict of kwargs that will be passed to the <a class="autorefs autorefs-internal" href="figure_resampler_interface/#figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace"><code>add_trace</code></a> method and
will be used to convert the existing traces. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This argument is only used when the passed <code>figure</code> contains data and
<code>convert_existing_traces</code> is set to True.</p>
</div>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>create_overview</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether an overview will be added to the figure (also known as rangeslider),
by default False. An overview is a bidirectionally linked figure that is
placed below the FigureResampler figure and shows a coarse version on which
the current view of the FigureResampler figure is highlighted. The overview
can be used to quickly navigate through the data by dragging the selection
box.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>In the case of subplots, the overview will be created for each subplot
  column. Only a single subplot row can be captured in the overview,
  this is by default the first row. If you want to customize this
  behavior, you can use the <code>overview_row_idxs</code> argument.</li>
<li>This functionality is not yet extensively validated. Please report any
  issues you encounter on GitHub.</li>
</ul>
</div>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>overview_row_idxs</code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of integers corresponding to the row indices (START AT 0) of the
subplots columns that should be linked with the column its corresponding
overview. By default None, which will result in the first row being utilized
for each column.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>overview_kwargs</code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dict of kwargs that will be passed to the <code>update_layout</code> method of the
overview figure, by default {}, which will result in utilizing the
[<code>default</code>][_DEFAULT_OVERVIEW_LAYOUT_KWARGS] overview layout kwargs.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>verbose</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether some verbose messages will be printed or not, by default False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>show_dash_kwargs</code></td>
            <td>
                  <code>dict | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dict that will be used as default kwargs for the <a class="autorefs autorefs-internal" href="figure_resampler/#figure_resampler.figure_resampler.FigureResampler.show_dash"><code>show_dash</code></a> method.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The passed kwargs to the <a class="autorefs autorefs-internal" href="figure_resampler/#figure_resampler.figure_resampler.FigureResampler.show_dash"><code>show_dash</code></a> method will take precedence over these defaults.</p>
</div>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>plotly_resampler/figure_resampler/figure_resampler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">figure</span><span class="p">:</span> <span class="n">BaseFigure</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">convert_existing_traces</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">default_n_shown_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="n">default_downsampler</span><span class="p">:</span> <span class="n">AbstractAggregator</span> <span class="o">=</span> <span class="n">MinMaxLTTB</span><span class="p">(),</span>
    <span class="n">default_gap_handler</span><span class="p">:</span> <span class="n">AbstractGapHandler</span> <span class="o">=</span> <span class="n">MedDiffGapHandler</span><span class="p">(),</span>
    <span class="n">resampled_trace_prefix_suffix</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">&#39;&lt;b style=&quot;color:sandybrown&quot;&gt;[R]&lt;/b&gt; &#39;</span><span class="p">,</span>
        <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">show_mean_aggregation_size</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">convert_traces_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">create_overview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">overview_row_idxs</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">overview_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">show_dash_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a dynamic aggregation data mirror using a dash web app.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    figure: BaseFigure</span>
<span class="sd">        The figure that will be decorated. Can be either an empty figure</span>
<span class="sd">        (e.g., ``go.Figure()``, ``make_subplots()``, ``go.FigureWidget``) or an</span>
<span class="sd">        existing figure.</span>
<span class="sd">    convert_existing_traces: bool</span>
<span class="sd">        A bool indicating whether the high-frequency traces of the passed ``figure``</span>
<span class="sd">        should be resampled, by default True. Hence, when set to False, the</span>
<span class="sd">        high-frequency traces of the passed ``figure`` will not be resampled.</span>
<span class="sd">    default_n_shown_samples: int, optional</span>
<span class="sd">        The default number of samples that will be shown for each trace,</span>
<span class="sd">        by default 1000.\n</span>
<span class="sd">        !!! note</span>
<span class="sd">            - This can be overridden within the [`add_trace`][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace] method.</span>
<span class="sd">            - If a trace withholds fewer datapoints than this parameter,</span>
<span class="sd">              the data will *not* be aggregated.</span>
<span class="sd">    default_downsampler: AbstractAggregator, optional</span>
<span class="sd">        An instance which implements the AbstractAggregator interface and</span>
<span class="sd">        will be used as default downsampler, by default ``MinMaxLTTB`` with</span>
<span class="sd">        ``MinMaxLTTB`` is a heuristic to the LTTB algorithm that uses pre-selection</span>
<span class="sd">        of min-max values (default 4 per bin) to speed up LTTB (as now only 4 values</span>
<span class="sd">        per bin are considered by LTTB). This min-max ratio of 4 can be changed by</span>
<span class="sd">        initializing ``MinMaxLTTB`` with a different value for the ``minmax_ratio``</span>
<span class="sd">        parameter. \n</span>
<span class="sd">        !!! note</span>
<span class="sd">            This can be overridden within the [`add_trace`][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace] method.</span>
<span class="sd">    default_gap_handler: AbstractGapHandler, optional</span>
<span class="sd">        An instance which implements the AbstractGapHandler interface and</span>
<span class="sd">        will be used as default gap handler, by default ``MedDiffGapHandler``.</span>
<span class="sd">        ``MedDiffGapHandler`` will determine gaps by first calculating the median</span>
<span class="sd">        aggregated x difference and then thresholding the aggregated x delta on a</span>
<span class="sd">        multiple of this median difference.  \n</span>
<span class="sd">        !!! note</span>
<span class="sd">            This can be overridden within the [`add_trace`][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace] method.</span>
<span class="sd">    resampled_trace_prefix_suffix: str, optional</span>
<span class="sd">        A tuple which contains the ``prefix`` and ``suffix``, respectively, which</span>
<span class="sd">        will be added to the trace its legend-name when a resampled version of the</span>
<span class="sd">        trace is shown. By default a bold, orange ``[R]`` is shown as prefix</span>
<span class="sd">        (no suffix is shown).</span>
<span class="sd">    show_mean_aggregation_size: bool, optional</span>
<span class="sd">        Whether the mean aggregation bin size will be added as a suffix to the trace</span>
<span class="sd">        its legend-name, by default True.</span>
<span class="sd">    convert_traces_kwargs: dict, optional</span>
<span class="sd">        A dict of kwargs that will be passed to the [`add_trace`][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.add_trace] method and</span>
<span class="sd">        will be used to convert the existing traces. \n</span>
<span class="sd">        !!! note</span>
<span class="sd">            This argument is only used when the passed ``figure`` contains data and</span>
<span class="sd">            ``convert_existing_traces`` is set to True.</span>
<span class="sd">    create_overview: bool, optional</span>
<span class="sd">        Whether an overview will be added to the figure (also known as rangeslider),</span>
<span class="sd">        by default False. An overview is a bidirectionally linked figure that is</span>
<span class="sd">        placed below the FigureResampler figure and shows a coarse version on which</span>
<span class="sd">        the current view of the FigureResampler figure is highlighted. The overview</span>
<span class="sd">        can be used to quickly navigate through the data by dragging the selection</span>
<span class="sd">        box.</span>
<span class="sd">        !!! note</span>
<span class="sd">            - In the case of subplots, the overview will be created for each subplot</span>
<span class="sd">              column. Only a single subplot row can be captured in the overview,</span>
<span class="sd">              this is by default the first row. If you want to customize this</span>
<span class="sd">              behavior, you can use the `overview_row_idxs` argument.</span>
<span class="sd">            - This functionality is not yet extensively validated. Please report any</span>
<span class="sd">              issues you encounter on GitHub.</span>
<span class="sd">    overview_row_idxs: list, optional</span>
<span class="sd">        A list of integers corresponding to the row indices (START AT 0) of the</span>
<span class="sd">        subplots columns that should be linked with the column its corresponding</span>
<span class="sd">        overview. By default None, which will result in the first row being utilized</span>
<span class="sd">        for each column.</span>
<span class="sd">    overview_kwargs: dict, optional</span>
<span class="sd">        A dict of kwargs that will be passed to the `update_layout` method of the</span>
<span class="sd">        overview figure, by default {}, which will result in utilizing the</span>
<span class="sd">        [`default`][_DEFAULT_OVERVIEW_LAYOUT_KWARGS] overview layout kwargs.</span>
<span class="sd">    verbose: bool, optional</span>
<span class="sd">        Whether some verbose messages will be printed or not, by default False.</span>
<span class="sd">    show_dash_kwargs: dict, optional</span>
<span class="sd">        A dict that will be used as default kwargs for the [`show_dash`][figure_resampler.figure_resampler.FigureResampler.show_dash] method.</span>
<span class="sd">        !!! note</span>
<span class="sd">            The passed kwargs to the [`show_dash`][figure_resampler.figure_resampler.FigureResampler.show_dash] method will take precedence over these defaults.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Parse the figure input before calling `super`</span>
    <span class="k">if</span> <span class="n">is_figure</span><span class="p">(</span><span class="n">figure</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_fr</span><span class="p">(</span><span class="n">figure</span><span class="p">):</span>
        <span class="c1"># A go.Figure</span>
        <span class="c1"># =&gt; base case: the figure does not need to be adjusted</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">figure</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Create a new figure object and make sure that the trace uid will not get</span>
        <span class="c1"># adjusted when they are added.</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_figure_class</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">)()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">_data_validator</span><span class="o">.</span><span class="n">set_uid</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">BaseFigure</span><span class="p">):</span>
            <span class="c1"># A base figure object, can be;</span>
            <span class="c1"># - a go.FigureWidget</span>
            <span class="c1"># - a plotly-resampler figure: subclass of AbstractFigureAggregator</span>
            <span class="c1"># =&gt; we first copy the layout, grid_str and grid ref</span>
            <span class="n">f</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">layout</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_grid_str</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">_grid_str</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">_grid_ref</span>
            <span class="n">f</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="s2">&quot;data&quot;</span> <span class="ow">in</span> <span class="n">figure</span> <span class="ow">or</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">in</span> <span class="n">figure</span>  <span class="c1"># or &quot;frames&quot; in figure  # TODO</span>
        <span class="p">):</span>
            <span class="c1"># A figure as a dict, can be;</span>
            <span class="c1"># - a plotly figure as a dict (after calling `fig.to_dict()`)</span>
            <span class="c1"># - a pickled (plotly-resampler) figure (after loading a pickled figure)</span>
            <span class="c1"># =&gt; we first copy the layout, grid_str and grid ref</span>
            <span class="n">f</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_grid_str</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_grid_str&quot;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_grid_ref&quot;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">))</span>
            <span class="c1"># `pr_props` is not None when loading a pickled plotly-resampler figure</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_pr_props</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pr_props&quot;</span><span class="p">)</span>
            <span class="c1"># `f._pr_props`` is an attribute to store properties of a</span>
            <span class="c1"># plotly-resampler figure. This attribute is only used to pass</span>
            <span class="c1"># information to the super() constructor. Once the super constructor is</span>
            <span class="c1"># called, the attribute is removed.</span>

            <span class="c1"># f.add_frames(figure.get(&quot;frames&quot;)) TODO</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="c1"># A single trace dict or a list of traces</span>
            <span class="n">f</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">figure</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_show_dash_kwargs</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">show_dash_kwargs</span> <span class="k">if</span> <span class="n">show_dash_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{}</span>
    <span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">f</span><span class="p">,</span>
        <span class="n">convert_existing_traces</span><span class="p">,</span>
        <span class="n">default_n_shown_samples</span><span class="p">,</span>
        <span class="n">default_downsampler</span><span class="p">,</span>
        <span class="n">default_gap_handler</span><span class="p">,</span>
        <span class="n">resampled_trace_prefix_suffix</span><span class="p">,</span>
        <span class="n">show_mean_aggregation_size</span><span class="p">,</span>
        <span class="n">convert_traces_kwargs</span><span class="p">,</span>
        <span class="n">verbose</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">AbstractFigureAggregator</span><span class="p">):</span>
        <span class="c1"># Copy the `_hf_data` if the previous figure was an AbstractFigureAggregator</span>
        <span class="c1"># and adjust the default `max_n_samples` and `downsampler`</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hf_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_copy_hf_data</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">_hf_data</span><span class="p">,</span> <span class="n">adjust_default_values</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Note: This hack ensures that the this figure object initially uses</span>
        <span class="c1"># data of the whole view. More concretely; we create a dict</span>
        <span class="c1"># serialization figure and adjust the hf-traces to the whole view</span>
        <span class="c1"># with the check-update method (by passing no range / filter args)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_update</span><span class="p">():</span>
            <span class="n">graph_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_current_graph</span><span class="p">()</span>
            <span class="n">update_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_update_figure_dict</span><span class="p">(</span><span class="n">graph_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">update_indices</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">graph_dict</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="n">idx</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_create_overview</span> <span class="o">=</span> <span class="n">create_overview</span>
    <span class="c1"># update the overview layout</span>
    <span class="n">overview_layout_kwargs</span> <span class="o">=</span> <span class="n">_DEFAULT_OVERVIEW_LAYOUT_KWARGS</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">overview_layout_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">overview_kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_overview_layout_kwargs</span> <span class="o">=</span> <span class="n">overview_layout_kwargs</span>

    <span class="c1"># array representing the row indices per column (START AT 0) of the subplot</span>
    <span class="c1"># that should be linked with the columns corresponding overview.</span>
    <span class="c1"># By default, the first row (i.e. index 0) will be utilized for each column</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_overview_row_idxs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_subplot_row_indices</span><span class="p">(</span><span class="n">overview_row_idxs</span><span class="p">)</span>

    <span class="c1"># The FigureResampler needs a dash app</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="p">:</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="figure_resampler.FigureResampler.construct_update_data_patch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">construct_update_data_patch</span><span class="p">(</span><span class="n">relayout_data</span><span class="p">)</span></code>

<a href="#figure_resampler.FigureResampler.construct_update_data_patch" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Construct the Patch of the to-be-updated front-end data, based on the layout
change.</p>


<details class="attention" open>
  <summary>Attention</summary>
  <p>This method is tightly coupled with Dash app callbacks. It takes the front-end
figure its <code>relayoutData</code> as input and returns the <code>dash.Patch</code> which needs
to be sent to the <code>figure</code> property for the corresponding <code>dcc.Graph</code>.</p>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>relayout_data</code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dict containing the <code>relayoutData</code> (i.e., the changed layout data) of
the corresponding front-end graph.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>dash.Patch:</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Patch object containing the figure updates which needs to be sent to
the front-end.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>plotly_resampler/figure_resampler/figure_resampler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">construct_update_data_patch</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">relayout_data</span><span class="p">:</span> <span class="nb">dict</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">dash</span><span class="o">.</span><span class="n">Patch</span><span class="p">,</span> <span class="n">dash</span><span class="o">.</span><span class="n">no_update</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Construct the Patch of the to-be-updated front-end data, based on the layout</span>
<span class="sd">    change.</span>

<span class="sd">    Attention</span>
<span class="sd">    ---------</span>
<span class="sd">    This method is tightly coupled with Dash app callbacks. It takes the front-end</span>
<span class="sd">    figure its ``relayoutData`` as input and returns the ``dash.Patch`` which needs</span>
<span class="sd">    to be sent to the ``figure`` property for the corresponding ``dcc.Graph``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    relayout_data: dict</span>
<span class="sd">        A dict containing the ``relayoutData`` (i.e., the changed layout data) of</span>
<span class="sd">        the corresponding front-end graph.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dash.Patch:</span>
<span class="sd">        The Patch object containing the figure updates which needs to be sent to</span>
<span class="sd">        the front-end.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">update_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_update_data</span><span class="p">(</span><span class="n">relayout_data</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update_data</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_data</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">dash</span><span class="o">.</span><span class="n">no_update</span>

    <span class="n">patched_figure</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Patch</span><span class="p">()</span>  <span class="c1"># create patch</span>
    <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">update_data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>  <span class="c1"># skip first item as it contains the relayout</span>
        <span class="n">trace_index</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>  <span class="c1"># the index of the corresponding trace</span>
        <span class="c1"># All the other items are the trace properties which needs to be updated</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">trace</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># NOTE: we need to use the `patched_figure` as a dict, and not</span>
            <span class="c1"># `patched_figure.data` as the latter will replace **all** the</span>
            <span class="c1"># data for the corresponding trace, and we just want to update the</span>
            <span class="c1"># specific trace its properties.</span>
            <span class="n">patched_figure</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="n">trace_index</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
    <span class="k">return</span> <span class="n">patched_figure</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="figure_resampler.FigureResampler.register_update_graph_callback" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register_update_graph_callback</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">graph_id</span><span class="p">,</span> <span class="n">coarse_graph_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#figure_resampler.FigureResampler.register_update_graph_callback" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Register the [<code>construct_update_data_patch</code>][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.construct_update_data_patch]
method as callback function to the passed dash-app.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>app</code></td>
            <td>
                  <code><span title="dash.Dash">Dash</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The app in which the callback will be registered.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>graph_id</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the <code>dcc.Graph</code>-component which withholds the to-be resampled
Figure.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>coarse_graph_id</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the <code>dcc.Graph</code>-component which withholds the coarse overview
Figure, by default None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>plotly_resampler/figure_resampler/figure_resampler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">register_update_graph_callback</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">app</span><span class="p">:</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">,</span>
    <span class="n">graph_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">coarse_graph_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register the [`construct_update_data_patch`][figure_resampler.figure_resampler_interface.AbstractFigureAggregator.construct_update_data_patch]</span>
<span class="sd">    method as callback function to the passed dash-app.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    app: Union[dash.Dash, JupyterDash]</span>
<span class="sd">        The app in which the callback will be registered.</span>
<span class="sd">    graph_id:</span>
<span class="sd">        The id of the ``dcc.Graph``-component which withholds the to-be resampled</span>
<span class="sd">        Figure.</span>
<span class="sd">    coarse_graph_id: str, optional</span>
<span class="sd">        The id of the ``dcc.Graph``-component which withholds the coarse overview</span>
<span class="sd">        Figure, by default None.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># As we use the figure again as output, we need to set: allow_duplicate=True</span>

    <span class="k">if</span> <span class="n">coarse_graph_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># update pr graph range with overview selection</span>
        <span class="n">app</span><span class="o">.</span><span class="n">clientside_callback</span><span class="p">(</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">ClientsideFunction</span><span class="p">(</span>
                <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;clientside&quot;</span><span class="p">,</span> <span class="n">function_name</span><span class="o">=</span><span class="s2">&quot;coarse_to_main&quot;</span>
            <span class="p">),</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">allow_duplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="n">coarse_graph_id</span><span class="p">,</span> <span class="s2">&quot;selectedData&quot;</span><span class="p">),</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">State</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">),</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">State</span><span class="p">(</span><span class="n">coarse_graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">),</span>
            <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># update selectbox with clientside callback</span>
        <span class="n">app</span><span class="o">.</span><span class="n">clientside_callback</span><span class="p">(</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">ClientsideFunction</span><span class="p">(</span>
                <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;clientside&quot;</span><span class="p">,</span> <span class="n">function_name</span><span class="o">=</span><span class="s2">&quot;main_to_coarse&quot;</span>
            <span class="p">),</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">coarse_graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">allow_duplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;relayoutData&quot;</span><span class="p">),</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">State</span><span class="p">(</span><span class="n">coarse_graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">),</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">State</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">),</span>
            <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
        <span class="n">dash</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;figure&quot;</span><span class="p">,</span> <span class="n">allow_duplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">dash</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="n">graph_id</span><span class="p">,</span> <span class="s2">&quot;relayoutData&quot;</span><span class="p">),</span>
        <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">construct_update_data_patch</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="figure_resampler.FigureResampler.show_dash" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_dash</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">init_dash_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">graph_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#figure_resampler.FigureResampler.show_dash" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Registers the <code>update_graph</code> callback &amp; show the figure in a dash app.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>mode</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Display mode. One of:</p>
<ul>
<li><code>"external"</code>: The URL of the app will be displayed in the notebook
    output cell. Clicking this URL will open the app in the default
    web browser.</li>
<li><code>"inline"</code>: The app will be displayed inline in the notebook output
    cell in an iframe.</li>
<li>
<p><code>"inline_persistent"</code>: The app will be displayed inline in the
    notebook output cell in an iframe, if the app is not reachable a static
    image of the figure is shown. Hence this is a persistent version of the
    <code>"inline"</code> mode, allowing users to see a static figure in other
    environments, browsers, etc.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This mode requires the <code>kaleido</code> and <code>flask_cors</code> package.
Install them : <code>pip install plotly_resampler[inline_persistent]</code>
or <code>pip install kaleido flask_cors</code>.</p>
</div>
</li>
<li>
<p><code>"jupyterlab"</code>: The app will be displayed in a dedicated tab in the
    JupyterLab interface. Requires JupyterLab and the <code>jupyterlab-dash</code>
    extension.
By default None, which will result in the same behavior as <code>"external"</code>.</p>
</li>
</ul>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>config</code></td>
            <td>
                  <code>dict | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configuration options for displaying this figure, by default None.
This <code>config</code> parameter is the same as the dict that you would pass as
<code>config</code> argument to the <code>show</code> method.
See more <a href="https://plotly.com/python/configuration-options/">https://plotly.com/python/configuration-options/</a></p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>init_dash_kwargs</code></td>
            <td>
                  <code>dict | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments for the Dash app constructor.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This variable is of special interest when working in a jupyterhub +
kubernetes environment. In this case, user notebook servers are spawned
as separate pods and user access to those servers are proxied via
jupyterhub. Dash requires the <code>requests_pathname_prefix</code> to be set on
<strong>init</strong> - which can be done via this <code>init_dash_kwargs</code> argument.
Note that you should also pass the <code>jupyter_server_url</code> to the
<code>show_dash</code> method.
More details: https://github.com/predict-idlab/plotly-resampler/issues/265</p>
</div>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>graph_properties</code></td>
            <td>
                  <code>dict | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of (keyword, value) for the properties that should be passed to
the dcc.Graph, by default None.
e.g.: <code>{"style": {"width": "50%"}}</code>
Note: &ldquo;config&rdquo; is not allowed as key in this dict, as there is a distinct
<code>config</code> parameter for this property in this method.
See more <a href="https://dash.plotly.com/dash-core-components/graph">https://dash.plotly.com/dash-core-components/graph</a></p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>**kwargs</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>kwargs for the <code>app.run_server()</code> method, e.g., port=8037.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These kwargs take precedence over the ones that are passed to the
constructor via the <code>show_dash_kwargs</code> argument.</p>
</div>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>plotly_resampler/figure_resampler/figure_resampler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">show_dash</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">init_dash_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">graph_properties</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Registers the `update_graph` callback &amp; show the figure in a dash app.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    mode: str, optional</span>
<span class="sd">        Display mode. One of:\n</span>
<span class="sd">          * ``&quot;external&quot;``: The URL of the app will be displayed in the notebook</span>
<span class="sd">            output cell. Clicking this URL will open the app in the default</span>
<span class="sd">            web browser.</span>
<span class="sd">          * ``&quot;inline&quot;``: The app will be displayed inline in the notebook output</span>
<span class="sd">            cell in an iframe.</span>
<span class="sd">          * ``&quot;inline_persistent&quot;``: The app will be displayed inline in the</span>
<span class="sd">            notebook output cell in an iframe, if the app is not reachable a static</span>
<span class="sd">            image of the figure is shown. Hence this is a persistent version of the</span>
<span class="sd">            ``&quot;inline&quot;`` mode, allowing users to see a static figure in other</span>
<span class="sd">            environments, browsers, etc.</span>

<span class="sd">            !!! note</span>

<span class="sd">                This mode requires the ``kaleido`` and ``flask_cors`` package.</span>
<span class="sd">                Install them : ``pip install plotly_resampler[inline_persistent]``</span>
<span class="sd">                or ``pip install kaleido flask_cors``.</span>

<span class="sd">          * ``&quot;jupyterlab&quot;``: The app will be displayed in a dedicated tab in the</span>
<span class="sd">            JupyterLab interface. Requires JupyterLab and the ``jupyterlab-dash``</span>
<span class="sd">            extension.</span>
<span class="sd">        By default None, which will result in the same behavior as ``&quot;external&quot;``.</span>
<span class="sd">    config: dict, optional</span>
<span class="sd">        The configuration options for displaying this figure, by default None.</span>
<span class="sd">        This ``config`` parameter is the same as the dict that you would pass as</span>
<span class="sd">        ``config`` argument to the `show` method.</span>
<span class="sd">        See more [https://plotly.com/python/configuration-options/](https://plotly.com/python/configuration-options/)</span>
<span class="sd">    init_dash_kwargs: dict, optional</span>
<span class="sd">        Keyword arguments for the Dash app constructor.</span>
<span class="sd">        !!! note</span>
<span class="sd">            This variable is of special interest when working in a jupyterhub +</span>
<span class="sd">            kubernetes environment. In this case, user notebook servers are spawned</span>
<span class="sd">            as separate pods and user access to those servers are proxied via</span>
<span class="sd">            jupyterhub. Dash requires the `requests_pathname_prefix` to be set on</span>
<span class="sd">            __init__ - which can be done via this `init_dash_kwargs` argument.</span>
<span class="sd">            Note that you should also pass the `jupyter_server_url` to the</span>
<span class="sd">            `show_dash` method.</span>
<span class="sd">            More details: https://github.com/predict-idlab/plotly-resampler/issues/265</span>
<span class="sd">    graph_properties: dict, optional</span>
<span class="sd">        Dictionary of (keyword, value) for the properties that should be passed to</span>
<span class="sd">        the dcc.Graph, by default None.</span>
<span class="sd">        e.g.: `{&quot;style&quot;: {&quot;width&quot;: &quot;50%&quot;}}`</span>
<span class="sd">        Note: &quot;config&quot; is not allowed as key in this dict, as there is a distinct</span>
<span class="sd">        ``config`` parameter for this property in this method.</span>
<span class="sd">        See more [https://dash.plotly.com/dash-core-components/graph](https://dash.plotly.com/dash-core-components/graph)</span>
<span class="sd">    **kwargs: dict</span>
<span class="sd">        kwargs for the ``app.run_server()`` method, e.g., port=8037.</span>
<span class="sd">        !!! note</span>
<span class="sd">            These kwargs take precedence over the ones that are passed to the</span>
<span class="sd">            constructor via the ``show_dash_kwargs`` argument.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">available_modes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dash</span><span class="o">.</span><span class="n">_jupyter</span><span class="o">.</span><span class="n">JupyterDisplayMode</span><span class="o">.</span><span class="n">__args__</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span>
        <span class="s2">&quot;inline_persistent&quot;</span>
    <span class="p">]</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">mode</span> <span class="ow">in</span> <span class="n">available_modes</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;mode must be one of </span><span class="si">{</span><span class="n">available_modes</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">graph_properties</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">graph_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">graph_properties</span>
    <span class="k">assert</span> <span class="s2">&quot;config&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">graph_properties</span>  <span class="c1"># There is a param for config</span>
    <span class="k">if</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;autosize&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;height&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">graph_properties</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;style&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="s2">&quot;100%&quot;</span><span class="p">})</span>

    <span class="c1"># 0. Check if the traces need to be updated when there is a xrange set</span>
    <span class="c1"># This will be the case when the users has set a xrange (via the `update_layout`</span>
    <span class="c1"># or `update_xaxes` methods`)</span>
    <span class="n">relayout_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">xaxis_str</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">:</span>
        <span class="n">x_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]</span><span class="o">.</span><span class="n">range</span>
        <span class="k">if</span> <span class="n">x_range</span><span class="p">:</span>  <span class="c1"># when not None</span>
            <span class="n">relayout_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xaxis_str</span><span class="si">}</span><span class="s2">.range[0]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">relayout_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xaxis_str</span><span class="si">}</span><span class="s2">.range[1]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">relayout_dict</span><span class="p">:</span>  <span class="c1"># when not empty</span>
        <span class="n">update_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_update_data</span><span class="p">(</span><span class="n">relayout_dict</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_no_update</span><span class="p">(</span><span class="n">update_data</span><span class="p">):</span>  <span class="c1"># when there is an update</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_update</span><span class="p">():</span>
                <span class="c1"># First update the layout (first item of update_data)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_relayout</span><span class="p">(</span><span class="n">update_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

                <span class="c1"># Then update the data</span>
                <span class="k">for</span> <span class="n">updated_trace</span> <span class="ow">in</span> <span class="n">update_data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                    <span class="n">trace_idx</span> <span class="o">=</span> <span class="n">updated_trace</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">trace_idx</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">updated_trace</span><span class="p">)</span>

    <span class="c1"># 1. Construct the Dash app layout</span>
    <span class="n">init_dash_kwargs</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">init_dash_kwargs</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">init_dash_kwargs</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_overview</span><span class="p">:</span>
        <span class="c1"># fmt: off</span>
        <span class="c1"># Add the assets folder to the init_dash_kwargs</span>
        <span class="n">init_dash_kwargs</span><span class="p">[</span><span class="s2">&quot;assets_folder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">ASSETS_FOLDER</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
        <span class="c1"># Also include the lodash script, as the client-side callbacks uses this</span>
        <span class="n">init_dash_kwargs</span><span class="p">[</span><span class="s2">&quot;external_scripts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;https://cdn.jsdelivr.net/npm/lodash/lodash.min.js&quot;</span> <span class="p">]</span>
        <span class="c1"># fmt: on</span>

    <span class="c1"># fmt: off</span>
    <span class="n">div</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;resample-figure&quot;</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">graph_properties</span>
            <span class="p">)</span>
        <span class="p">],</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;flex&quot;</span><span class="p">,</span> <span class="s2">&quot;flex-flow&quot;</span><span class="p">:</span> <span class="s2">&quot;column&quot;</span><span class="p">,</span>
            <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="s2">&quot;95vh&quot;</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="s2">&quot;100%&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>
    <span class="c1"># fmt: on</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_overview</span><span class="p">:</span>
        <span class="n">overview_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{}</span>
        <span class="n">overview_config</span><span class="p">[</span><span class="s2">&quot;displayModeBar&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">coarse_fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_overview_figure</span><span class="p">()</span>
        <span class="n">div</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">[</span>
            <span class="n">dash</span><span class="o">.</span><span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;overview-figure&quot;</span><span class="p">,</span>
                <span class="n">figure</span><span class="o">=</span><span class="n">coarse_fig</span><span class="p">,</span>
                <span class="n">config</span><span class="o">=</span><span class="n">overview_config</span><span class="p">,</span>
                <span class="o">**</span><span class="n">graph_properties</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span>

    <span class="c1"># Create the app, populate the layout and register the resample callback</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="s2">&quot;local_app&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">init_dash_kwargs</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">div</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">register_update_graph_callback</span><span class="p">(</span>
        <span class="n">app</span><span class="p">,</span>
        <span class="s2">&quot;resample-figure&quot;</span><span class="p">,</span>
        <span class="s2">&quot;overview-figure&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_overview</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># 2. Run the app</span>
    <span class="n">height_param</span> <span class="o">=</span> <span class="s2">&quot;height&quot;</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;inline_persistent&quot;</span> <span class="k">else</span> <span class="s2">&quot;jupyter_height&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;inline&quot;</span> <span class="ow">in</span> <span class="n">mode</span> <span class="ow">and</span> <span class="n">height_param</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="c1"># If app height is not specified -&gt; re-use figure height for inline dash app</span>
        <span class="c1">#  Note: default layout height is 450 (whereas default app height is 650)</span>
        <span class="c1">#  See: https://plotly.com/python/reference/layout/#layout-height</span>
        <span class="n">fig_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">450</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="n">height_param</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig_height</span> <span class="o">+</span> <span class="mi">18</span>

    <span class="c1"># kwargs take precedence over the show_dash_kwargs</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_show_dash_kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">}</span>

    <span class="c1"># Store the app information, so it can be killed</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_app</span> <span class="o">=</span> <span class="n">app</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_host</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;host&quot;</span><span class="p">,</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;port&quot;</span><span class="p">,</span> <span class="s2">&quot;8050&quot;</span><span class="p">)</span>

    <span class="c1"># function signatures are slightly different for the (Jupyter)Dash and the</span>
    <span class="c1"># JupyterDashInlinePersistent implementations</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;inline_persistent&quot;</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">.jupyter_dash_persistent_inline_output</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">JupyterDashPersistentInlineOutput</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">jpi</span> <span class="o">=</span> <span class="n">JupyterDashPersistentInlineOutput</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">jpi</span><span class="o">.</span><span class="n">run_app</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="n">app</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">jupyter_mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="figure_resampler.FigureResampler.stop_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop_server</span><span class="p">(</span><span class="n">warn</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#figure_resampler.FigureResampler.stop_server" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Stop the running dash-app.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>warn</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether a warning message will be shown or  not, by default True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>plotly_resampler/figure_resampler/figure_resampler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">stop_server</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">warn</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop the running dash-app.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    warn: bool</span>
<span class="sd">        Whether a warning message will be shown or  not, by default True.</span>

<span class="sd">    !!! warning</span>

<span class="sd">        This only works if the dash-app was started with [`show_dash`][figure_resampler.figure_resampler.FigureResampler.show_dash].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">servers_dict</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">jupyter_dash</span><span class="o">.</span><span class="n">_servers</span>
        <span class="n">old_server</span> <span class="o">=</span> <span class="n">servers_dict</span><span class="o">.</span><span class="n">get</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">old_server</span><span class="p">:</span>
            <span class="n">old_server</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">servers_dict</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">_host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="n">warn</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;Could not stop the server, either the </span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">- &#39;show-dash&#39; method was not called, or </span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">- the dash-server wasn&#39;t started with &#39;show_dash&#39;&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="figure_resampler.FigureWidgetResampler" class="doc doc-heading">
            <code>FigureWidgetResampler</code>


<a href="#figure_resampler.FigureWidgetResampler" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="figure_resampler.figure_resampler_interface.AbstractFigureAggregator" href="figure_resampler_interface/#figure_resampler.figure_resampler_interface.AbstractFigureAggregator">AbstractFigureAggregator</a></code>, <code><span title="plotly.graph_objects.FigureWidget">FigureWidget</span></code></p>


      <p>Data aggregation functionality wrapper for <code>go.FigureWidgets</code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul>
<li>This wrapper only works within <code>jupyter</code>-based environments.</li>
<li>The <code>.show()</code> method returns a <strong>static figure</strong> on which the
  <strong>dynamic resampling cannot be performed</strong>. To allow dynamic resampling,
  you should just output the <code>FigureWidgetResampler</code> object in a cell.</li>
</ul>
</div>

              <details class="quote">
                <summary>Source code in <code>plotly_resampler/figure_resampler/figurewidget_resampler.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FigureWidgetResampler</span><span class="p">(</span>
    <span class="n">AbstractFigureAggregator</span><span class="p">,</span> <span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">_FigureWidgetResamplerM</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Data aggregation functionality wrapper for ``go.FigureWidgets``.</span>

<span class="sd">    !!! warning</span>

<span class="sd">        * This wrapper only works within ``jupyter``-based environments.</span>
<span class="sd">        * The ``.show()`` method returns a **static figure** on which the</span>
<span class="sd">          **dynamic resampling cannot be performed**. To allow dynamic resampling,</span>
<span class="sd">          you should just output the ``FigureWidgetResampler`` object in a cell.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">figure</span><span class="p">:</span> <span class="n">BaseFigure</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">convert_existing_traces</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">default_n_shown_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="n">default_downsampler</span><span class="p">:</span> <span class="n">AbstractAggregator</span> <span class="o">=</span> <span class="n">MinMaxLTTB</span><span class="p">(),</span>
        <span class="n">default_gap_handler</span><span class="p">:</span> <span class="n">AbstractGapHandler</span> <span class="o">=</span> <span class="n">MedDiffGapHandler</span><span class="p">(),</span>
        <span class="n">resampled_trace_prefix_suffix</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s1">&#39;&lt;b style=&quot;color:sandybrown&quot;&gt;[R]&lt;/b&gt; &#39;</span><span class="p">,</span>
            <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">show_mean_aggregation_size</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">convert_traces_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1"># Parse the figure input before calling `super`</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_figure_class</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">)()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">_data_validator</span><span class="o">.</span><span class="n">set_uid</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">BaseFigure</span><span class="p">):</span>
            <span class="c1"># A base figure object, can be;</span>
            <span class="c1"># - a base plotly figure: go.Figure or go.FigureWidget</span>
            <span class="c1"># - a plotly-resampler figure: subclass of AbstractFigureAggregator</span>
            <span class="c1"># =&gt; we first copy the layout, grid_str and grid ref</span>
            <span class="n">f</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">layout</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_grid_str</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">_grid_str</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">_grid_ref</span>
            <span class="n">f</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="s2">&quot;data&quot;</span> <span class="ow">in</span> <span class="n">figure</span> <span class="ow">or</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">in</span> <span class="n">figure</span>  <span class="c1"># or &quot;frames&quot; in figure  # TODO</span>
        <span class="p">):</span>
            <span class="c1"># A figure as a dict, can be;</span>
            <span class="c1"># - a plotly figure as a dict (after calling `fig.to_dict()`)</span>
            <span class="c1"># - a pickled (plotly-resampler) figure (after loading a pickled figure)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_grid_str</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_grid_str&quot;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_grid_ref</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_grid_ref&quot;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">))</span>
            <span class="c1"># `pr_props` is not None when loading a pickled plotly-resampler figure</span>
            <span class="n">f</span><span class="o">.</span><span class="n">_pr_props</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pr_props&quot;</span><span class="p">)</span>
            <span class="c1"># `f._pr_props`` is an attribute to store properties of a plotly-resampler</span>
            <span class="c1"># figure. This attribute is only used to pass information to the super()</span>
            <span class="c1"># constructor. Once the super constructor is called, the attribute is</span>
            <span class="c1"># removed.</span>

            <span class="c1"># f.add_frames(figure.get(&quot;frames&quot;)) TODO</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="c1"># A single trace dict or a list of traces</span>
            <span class="n">f</span><span class="o">.</span><span class="n">add_traces</span><span class="p">(</span><span class="n">figure</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">f</span><span class="p">,</span>
            <span class="n">convert_existing_traces</span><span class="p">,</span>
            <span class="n">default_n_shown_samples</span><span class="p">,</span>
            <span class="n">default_downsampler</span><span class="p">,</span>
            <span class="n">default_gap_handler</span><span class="p">,</span>
            <span class="n">resampled_trace_prefix_suffix</span><span class="p">,</span>
            <span class="n">show_mean_aggregation_size</span><span class="p">,</span>
            <span class="n">convert_traces_kwargs</span><span class="p">,</span>
            <span class="n">verbose</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">AbstractFigureAggregator</span><span class="p">):</span>
            <span class="c1"># Copy the `_hf_data` if the previous figure was an AbstractFigureAggregator</span>
            <span class="c1"># And adjust the default max_n_samples and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hf_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_copy_hf_data</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">_hf_data</span><span class="p">,</span> <span class="n">adjust_default_values</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Note: This hack ensures that the this figure object initially uses</span>
            <span class="c1"># data of the whole view. More concretely; we create a dict</span>
            <span class="c1"># serialization figure and adjust the hf-traces to the whole view</span>
            <span class="c1"># with the check-update method (by passing no range / filter args)</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_update</span><span class="p">():</span>
                <span class="n">graph_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_current_graph</span><span class="p">()</span>
                <span class="n">update_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_update_figure_dict</span><span class="p">(</span><span class="n">graph_dict</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">update_indices</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">graph_dict</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="n">idx</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_prev_layout</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Contains the previous xaxis layout configuration</span>

        <span class="c1"># used for logging purposes to save a history of layout changes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_relayout_hist</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Assign the the update-methods to the corresponding classes</span>
        <span class="n">showspike_keys</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xaxis</span><span class="si">}</span><span class="s2">.showspikes&quot;</span> <span class="k">for</span> <span class="n">xaxis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">on_change</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_spike_ranges</span><span class="p">,</span> <span class="o">*</span><span class="n">showspike_keys</span><span class="p">)</span>

        <span class="n">x_relayout_keys</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xaxis</span><span class="si">}</span><span class="s2">.range&quot;</span> <span class="k">for</span> <span class="n">xaxis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">on_change</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_x_ranges</span><span class="p">,</span> <span class="o">*</span><span class="n">x_relayout_keys</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_update_x_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">,</span> <span class="o">*</span><span class="n">x_ranges</span><span class="p">,</span> <span class="n">force_update</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the the go.Figure data based on changed x-ranges.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        layout : go.Layout</span>
<span class="sd">            The figure&#39;s (i.e, self) layout object. Remark that this is a reference,</span>
<span class="sd">            so if we change self.layout (same object reference), this object will</span>
<span class="sd">            change.</span>
<span class="sd">        *x_ranges: iterable</span>
<span class="sd">            A iterable list of current x-ranges, where each x-range is a tuple of two</span>
<span class="sd">            items, indicating the current/new (if changed) left-right x-range,</span>
<span class="sd">            respectively.</span>
<span class="sd">        fore_update: bool</span>
<span class="sd">            Whether an update of all traces will be forced, by default False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">relayout_dict</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># variable in which we aim to reconstruct the relayout</span>
        <span class="c1"># serialize the layout in a new dict object</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">xaxis_str</span><span class="p">:</span> <span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]</span><span class="o">.</span><span class="n">to_plotly_json</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">xaxis_str</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prev_layout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prev_layout</span> <span class="o">=</span> <span class="n">layout</span>

        <span class="k">for</span> <span class="n">xaxis_str</span><span class="p">,</span> <span class="n">x_range</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">,</span> <span class="n">x_ranges</span><span class="p">):</span>
            <span class="c1"># We also check whether &quot;range&quot; is within the xaxis its layout otherwise</span>
            <span class="c1"># It is most-likely an autorange check</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="s2">&quot;range&quot;</span> <span class="ow">in</span> <span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]</span>
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prev_layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;range&quot;</span><span class="p">,</span> <span class="p">[])</span> <span class="o">!=</span> <span class="n">x_range</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">and</span> <span class="n">x_range</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="c1"># a change took place -&gt; add to the relayout dict</span>
                <span class="n">relayout_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xaxis_str</span><span class="si">}</span><span class="s2">.range[0]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">relayout_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xaxis_str</span><span class="si">}</span><span class="s2">.range[1]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

                <span class="c1"># An update will take place for that trace</span>
                <span class="c1"># -&gt; save current xaxis range to _prev_layout</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_prev_layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">][</span><span class="s2">&quot;range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_range</span>

        <span class="k">if</span> <span class="n">relayout_dict</span><span class="p">:</span>  <span class="c1"># when not empty</span>
            <span class="c1"># Construct the update data</span>
            <span class="n">update_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_update_data</span><span class="p">(</span><span class="n">relayout_dict</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_no_update</span><span class="p">(</span><span class="n">update_data</span><span class="p">):</span>
                <span class="c1"># Return when no data update</span>
                <span class="k">return</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_verbose</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_relayout_hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">,</span> <span class="n">x_ranges</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_relayout_hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_relayout_hist</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s2">&quot;xaxis-range-update&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_relayout_hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_update</span><span class="p">():</span>
                <span class="c1"># First update the layout (first item of update_data)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_relayout</span><span class="p">(</span><span class="n">update_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

                <span class="k">for</span> <span class="n">xaxis_str</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s2">&quot;showspikes&quot;</span> <span class="ow">in</span> <span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;showspikes&quot;</span><span class="p">)</span>

                <span class="c1"># Then update the data</span>
                <span class="k">for</span> <span class="n">updated_trace</span> <span class="ow">in</span> <span class="n">update_data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                    <span class="n">trace_idx</span> <span class="o">=</span> <span class="n">updated_trace</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">trace_idx</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">updated_trace</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_update_spike_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">,</span> <span class="o">*</span><span class="n">showspikes</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the go.Figure based on the changed spike-ranges.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        layout : go.Layout</span>
<span class="sd">            The figure&#39;s (i.e, self) layout object. Remark that this is a reference,</span>
<span class="sd">            so if we change self.layout (same object reference), this object will</span>
<span class="sd">            change.</span>
<span class="sd">        *showspikes: iterable</span>
<span class="sd">            A iterable where each item is a bool, indicating  whether showspikes is set</span>
<span class="sd">            to true/false for the corresponding xaxis in ``self._xaxis_list``.</span>
<span class="sd">        force_update: bool</span>
<span class="sd">            Bool indicating whether the range updates need to take place. This is</span>
<span class="sd">            especially useful when you have recently updated the figure its data (with</span>
<span class="sd">            the hf_data property) and want to perform an autoscale, independent from</span>
<span class="sd">            the current figure-layout.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">relayout_dict</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># variable in which we aim to reconstruct the relayout</span>
        <span class="c1"># serialize the layout in a new dict object</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">xaxis_str</span><span class="p">:</span> <span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]</span><span class="o">.</span><span class="n">to_plotly_json</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">xaxis_str</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prev_layout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prev_layout</span> <span class="o">=</span> <span class="n">layout</span>

        <span class="k">for</span> <span class="n">xaxis_str</span><span class="p">,</span> <span class="n">showspike</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">,</span> <span class="n">showspikes</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">force_update</span>
                <span class="ow">or</span>
                <span class="c1"># autorange key must be set to True</span>
                <span class="p">(</span>
                    <span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;autorange&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                    <span class="c1"># we only perform updates for traces which have &#39;range&#39; property,</span>
                    <span class="c1"># as we do need to reconstruct the update-data for these traces</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prev_layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;range&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="p">)</span>
            <span class="p">):</span>
                <span class="n">relayout_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xaxis_str</span><span class="si">}</span><span class="s2">.autorange&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">relayout_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xaxis_str</span><span class="si">}</span><span class="s2">.showspikes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">showspike</span>
                <span class="c1"># autorange -&gt; we pop the xaxis range</span>
                <span class="k">if</span> <span class="s2">&quot;range&quot;</span> <span class="ow">in</span> <span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]:</span>
                    <span class="k">del</span> <span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">][</span><span class="s2">&quot;range&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">relayout_dict</span><span class="p">):</span>
            <span class="c1"># An update will take place, save current layout to _prev_layout</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prev_layout</span> <span class="o">=</span> <span class="n">layout</span>

            <span class="c1"># Construct the update data</span>
            <span class="n">update_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_update_data</span><span class="p">(</span><span class="n">relayout_dict</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_no_update</span><span class="p">(</span><span class="n">update_data</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_verbose</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_relayout_hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_relayout_hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="p">[</span><span class="s2">&quot;showspikes-update&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_relayout_hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>

                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_update</span><span class="p">():</span>
                    <span class="c1"># First update the layout (first item of update_data)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">force_update</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_relayout</span><span class="p">(</span><span class="n">update_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

                    <span class="c1"># Also: Remove the showspikes from the layout, otherwise the autorange</span>
                    <span class="c1"># will not work as intended (it will not be triggered again)</span>
                    <span class="c1"># Note: this removal causes a second trigger of this method</span>
                    <span class="c1"># which will go in the &quot;else&quot; part below.</span>
                    <span class="k">for</span> <span class="n">xaxis_str</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;showspikes&quot;</span><span class="p">)</span>

                    <span class="c1"># Then, update the data</span>
                    <span class="k">for</span> <span class="n">updated_trace</span> <span class="ow">in</span> <span class="n">update_data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                        <span class="n">trace_idx</span> <span class="o">=</span> <span class="n">updated_trace</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">trace_idx</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">updated_trace</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print_verbose</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_relayout_hist</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s2">&quot;showspikes&quot;</span><span class="p">,</span> <span class="s2">&quot;initial call or showspikes&quot;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_relayout_hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset the axes of the FigureWidgetResampler.</span>

<span class="sd">        This is useful when adjusting the `hf_data` properties of the</span>
<span class="sd">        ``FigureWidgetResampler``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_spike_ranges</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">),</span> <span class="n">force_update</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="c1"># Reset the layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">axis</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;autorange&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
                <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_list</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reload_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reload all the data of FigureWidgetResampler for the current range-view.</span>

<span class="sd">        This is useful when adjusting the `hf_data` properties of the</span>
<span class="sd">        ``FigureWidgetResampler``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis</span><span class="p">]</span><span class="o">.</span><span class="n">autorange</span>
            <span class="ow">or</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis</span><span class="p">]</span><span class="o">.</span><span class="n">autorange</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis</span><span class="p">]</span><span class="o">.</span><span class="n">range</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">xaxis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_spike_ranges</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">),</span> <span class="n">force_update</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Resample the data for the current range-view</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_x_ranges</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span>
                <span class="c1"># Pass the current view to trigger a resample operation</span>
                <span class="o">*</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">][</span><span class="s2">&quot;range&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">xaxis_str</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">],</span>
                <span class="n">force_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># TODO: when we know which traces have changed we can use</span>
            <span class="c1"># a new -&gt; `update_xaxis_str` argument.</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__reduce__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Needed for pickling</span>
        <span class="c1"># Specifically set the class name, as the metaclass is not easily picklable</span>
        <span class="k">return</span> <span class="n">FigureWidgetResampler</span><span class="p">,</span> <span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__reduce__</span><span class="p">())[</span><span class="mi">1</span><span class="p">:]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="figure_resampler.FigureWidgetResampler.reload_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reload_data</span><span class="p">()</span></code>

<a href="#figure_resampler.FigureWidgetResampler.reload_data" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Reload all the data of FigureWidgetResampler for the current range-view.</p>
<p>This is useful when adjusting the <code>hf_data</code> properties of the
<code>FigureWidgetResampler</code>.</p>

            <details class="quote">
              <summary>Source code in <code>plotly_resampler/figure_resampler/figurewidget_resampler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reload_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reload all the data of FigureWidgetResampler for the current range-view.</span>

<span class="sd">    This is useful when adjusting the `hf_data` properties of the</span>
<span class="sd">    ``FigureWidgetResampler``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis</span><span class="p">]</span><span class="o">.</span><span class="n">autorange</span>
        <span class="ow">or</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis</span><span class="p">]</span><span class="o">.</span><span class="n">autorange</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis</span><span class="p">]</span><span class="o">.</span><span class="n">range</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">xaxis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_spike_ranges</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">),</span> <span class="n">force_update</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Resample the data for the current range-view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_x_ranges</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span>
            <span class="c1"># Pass the current view to trigger a resample operation</span>
            <span class="o">*</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">[</span><span class="n">xaxis_str</span><span class="p">][</span><span class="s2">&quot;range&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">xaxis_str</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">],</span>
            <span class="n">force_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="figure_resampler.FigureWidgetResampler.reset_axes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset_axes</span><span class="p">()</span></code>

<a href="#figure_resampler.FigureWidgetResampler.reset_axes" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Reset the axes of the FigureWidgetResampler.</p>
<p>This is useful when adjusting the <code>hf_data</code> properties of the
<code>FigureWidgetResampler</code>.</p>

            <details class="quote">
              <summary>Source code in <code>plotly_resampler/figure_resampler/figurewidget_resampler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reset the axes of the FigureWidgetResampler.</span>

<span class="sd">    This is useful when adjusting the `hf_data` properties of the</span>
<span class="sd">    ``FigureWidgetResampler``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_update_spike_ranges</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span><span class="p">),</span> <span class="n">force_update</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="c1"># Reset the layout</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="n">axis</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;autorange&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
            <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_list</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_list</span>
        <span class="p">}</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.path", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>